<!DOCTYPE html>
<html lang="en">
	<head>
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
		<meta charset="utf-8" />
		<title>置业绿城-楼盘标签</title>
		<meta name="description" content="overview &amp; stats" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0" />
		<!-- bootstrap & fontawesome -->
		<link rel="stylesheet" href="assets/css/bootstrap.min.css" />
		<link rel="stylesheet" href="assets/font-awesome/4.5.0/css/font-awesome.min.css" />
		<!-- page specific plugin styles -->
		<!-- text fonts -->
		<link rel="stylesheet" href="assets/css/fonts.googleapis.com.css" />
		<!-- ace styles -->
		<link rel="stylesheet" href="assets/css/ace.min.css" class="ace-main-stylesheet" id="main-ace-style" />
		<!--[if lte IE 9]>
			<link rel="stylesheet" href="assets/css/ace-part2.min.css" class="ace-main-stylesheet" />
		<![endif]-->
		<link rel="stylesheet" href="assets/css/ace-skins.min.css" />
		<link rel="stylesheet" href="assets/css/ace-rtl.min.css" />
		<!--<link rel="stylesheet" href="assets/css/building-list.css" />-->
		<link rel="stylesheet" href="assets/css/building-label.css" />
		<!-- <link rel="stylesheet" href="assets/css/notic.css" /> -->
		<!--[if lte IE 9]>
		  <link rel="stylesheet" href="assets/css/ace-ie.min.css" />
		<![endif]-->
		<!-- inline styles related to this page -->
		<!-- ace settings handler -->
		<script src="assets/js/ace-extra.min.js"></script>
		<!-- HTML5shiv and Respond.js for IE8 to support HTML5 elements and media queries -->
		<!--[if lte IE 8]>
		<script src="assets/js/html5shiv.min.js"></script>
		<script src="assets/js/respond.min.js"></script>
		<![endif]-->
	</head>
	<body class="no-skin">
		<div class="mask"></div>
		<div id="navbar" class="navbar navbar-default ace-save-state">
				<div class="navbar-header pull-left">
					<a href="index.html" class="navbar-brand">
						<small>
							<i class="fa fa-leaf"></i>
							置业绿城
						</small>
					</a>
				</div>
				<div class="navbar-buttons navbar-header pull-right" role="navigation">
					<ul class="nav ace-nav">
						<li class="light-blue dropdown-modal">
							<a data-toggle="dropdown" href="#" class="dropdown-toggle">
								<span class="user-info">
									<small>Welcome,</small>
									Jason
								</span>
								<i class="ace-icon fa fa-caret-down"></i>
							</a>
						</li>
					</ul>
				</div>
			</div><!-- /.navbar-container -->
		</div>
		<div class="main-container ace-save-state" id="main-container">
			<div id="sidebar" class="sidebar responsive ace-save-state">
				<script type="text/javascript">
					try{ace.settings.loadState('sidebar')}catch(e){}
				</script>
				<ul class="nav nav-list">
					<li class=" "> 
						<a href="workbench.html">
							<i class="menu-icon">
								<img src="assets/images/back-icon/workbench.svg" style="width: 18px;height: 18px;">
							</i>
							<span class="menu-text"> 工作台 </span>
						</a>
					</li>
					<li class="">
						<a href="#" class="dropdown-toggle">
							<!--<i class="fa fa-briefcase fa-lg" ></i>-->
							<i class="menu-icon">
								<img src="assets/images/back-icon/building.svg" style="width: 18px;height: 18px;">
							</i>
							<span class="menu-text">
								楼盘管理
							</span>
							<b class="arrow fa fa-angle-down" ></b>
						</a>
						<b class="arrow"></b>
						<ul class="submenu">
							<li class="">
								<a href="building-list.html">
									<i class="menu-icon fa fa-caret-right"></i>
									楼盘列表
								</a>

								<b class="arrow"></b>
							</li>
							<li class="">
								<a href="building-label.html">
									<i class="menu-icon fa fa-caret-right"></i>
									楼盘标签
								</a>

								<b class="arrow"></b>
							</li>
							<li class="">
								<a href="plate-sorting.html">
									<i class="menu-icon fa fa-caret-right"></i>
									板块排序
								</a>

								<b class="arrow"></b>
							</li>
						</ul>
					</li>
					<li class="">
						<a href="article-management.html">
							<i class="menu-icon">
								<img src="assets/images/back-icon/article.svg" style="width: 18px;height: 18px;">
							</i>
							<span class="menu-text"> 文章管理 </span>
						</a>
						<b class="arrow"></b>
					</li>
					<li class="">
						<a href="activity-management.html">
							<i class="menu-icon">
								<img src="assets/images/back-icon/activity.svg" style="width: 18px;height: 18px;">
							</i>
							<span class="menu-text">活动管理</span>
						</a>
						<b class="arrow"></b>
					</li>
					<li class="">
						<a href="reservation-list.html">
							<i class="menu-icon">
								<img src="assets/images/back-icon/order.svg" style="width: 18px;height: 18px;">
							</i>
							<span class="menu-text"> 预约列表 </span>
						</a>
						<b class="arrow"></b>
					</li>
					<li class="">
						<a href="customer-management.html">
							<i class="menu-icon">
								<img src="assets/images/back-icon/customer.svg" style="width: 18px;height: 18px;">
							</i>
							<span class="menu-text">
								客户管理
							</span>
						</a>
						<b class="arrow"></b>
					</li>
					<li class="">
						<a href="#" class="dropdown-toggle">
							<i class="menu-icon">
								<img src="assets/images/back-icon/first-page.svg" style="width: 18px;height: 18px;">
							</i>
							<span class="menu-text"> 首页管理</span>
							<b class="arrow fa fa-angle-down" ></b>
						</a>
						<b class="arrow"></b>
						<ul class="submenu">
							<li class="">
								<a href="first-list.html">
									<i class="menu-icon fa fa-caret-right"></i>
									首页配置
								</a>
								<b class="arrow"></b>
							</li>
							<li class="">
								<a href="city-management.html">
									<i class="menu-icon fa fa-caret-right"></i>
									城市管理
								</a>

								<b class="arrow"></b>
							</li>
						</ul>
					</li>
					<li class="">
						<a href="notic.html" >
							<i class="menu-icon">
								<img src="assets/images/back-icon/announcement.svg" style="width: 18px;height: 18px;">
							</i>
							<span class="menu-text">公告管理</span>
						</a>
					</li>
					<li class="">
						<a href="#" class="dropdown-toggle">
							<i class="menu-icon">
								<img src="assets/images/back-icon/system.svg" style="width: 18px;height: 18px;">
							</i>
							<span class="menu-text">
								系统管理
							</span>
							<b class="arrow fa fa-angle-down" ></b>
						</a>
						<b class="arrow"></b>
						<ul class="submenu">
							<li class="">
								<a href="user-management.html">
									<i class="menu-icon fa fa-caret-right"></i>
									用户管理
								</a>

								<b class="arrow"></b>
							</li>
							<li class="">
								<a href="menu-management.html">
									<i class="menu-icon fa fa-caret-right"></i>
									菜单管理
								</a>

								<b class="arrow"></b>
							</li>
							<li class="">
								<a href="role-management.html">
									<i class="menu-icon fa fa-caret-right"></i>
									角色管理
								</a>
								<b class="arrow"></b>
							</li>
							<li class="">
								<a href="dictionary-management.html">
									<i class="menu-icon fa fa-caret-right"></i>
									字典管理
								</a>
								<b class="arrow"></b>
							</li>
						</ul>
					</li>
			</div>
		<!--顶部-->
			<div class="main-content">
				<div class="main-content-inner">
					<div class="breadcrumbs ace-save-state" id="breadcrumbs">
						<ul class="breadcrumb">
							<li>
								标签名称&nbsp;:<input class="input" type="text"  placeholder="输入标签名称" style="border-radius: 6px;margin-left: 0.8rem;"/>
							</li>
							<li>
								创建时间：
								<input type="date"/>
							</li>
							<li>						
								至&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<input type="date"/>
							</li>
							<li>
								<div class="sousuo">
									<a href="#">搜索</a>
								</div>
							</li>	
						</ul> 
				</div>
			<!--新建楼盘-->
			<div class="new-building">
				<a href="#">
					新增标签
				</a>				
			</div>
			<!--中间显示页面-->		
						<div class="row">
							<div class="col-xs-12">
								<!-- PAGE CONTENT BEGINS -->
								<div class="row">
									<div class="col-xs-12">
										<table id="simple-table" class="table  table-bordered table-hover">
											<thead>
												<tr>
													<th>标签名称</th>
													<th>创建时间</th>
													<th>创建人</th>
													<th class="hidden-480">应用楼盘数量</th>
													<th class="hidden-480">操作</th>
												</tr>
											</thead>
											<tbody id="buildingLabel">
												
											</tbody>
										</table>
										<!---->
										<div class="opening-information">
											<div class="new-lab">
												新增标签 <span class="bl-del">X</span>
											</div>
											<table id="simple-table" class="table">
												<tbody>
													<tr>
														<td>
															<input id="doId" style="display: none;" type="text" style="width: 240px;height: 30px;" autocomplete="off" />
															<input id="doupdate" type="text" style="width: 240px;height: 30px;" autocomplete="off" /> 
														</td>										
													</tr>									
													<tr>
														<td>
															<div onclick="sunmit()" class="submit">提交</div>
														</td>
													</tr>
												</tbody>
											</table>
										<div>
									</div><!-- /.span -->
								</div><!-- /.row -->
							</body>
						</html>

		<script src="assets/js/jquery-2.1.4.min.js"></script>
		<!-- <![endif]-->
		<!--[if IE]>
		<script src="assets/js/jquery-1.11.3.min.js"></script>
		<![endif]-->
		<script type="text/javascript">
			if('ontouchstart' in document.documentElement) document.write("<script src='assets/js/jquery.mobile.custom.min.js'>"+"<"+"/script>");
		</script>
		<script src="assets/js/bootstrap.min.js"></script>
		<!-- page specific plugin scripts -->
		<!--[if lte IE 8]>
		  <script src="assets/js/excanvas.min.js"></script>
		<![endif]-->
		<script src="assets/js/jquery-ui.custom.min.js"></script>
		<script src="assets/js/jquery.ui.touch-punch.min.js"></script>
		<script src="assets/js/jquery.easypiechart.min.js"></script>
		<script src="assets/js/jquery.sparkline.index.min.js"></script>
		<script src="assets/js/jquery.flot.min.js"></script>
		<script src="assets/js/jquery.flot.pie.min.js"></script>
		<script src="assets/js/jquery.flot.resize.min.js"></script>
		<!-- ace scripts -->
		<script src="assets/js/ace-elements.min.js"></script>
		<script src="assets/js/ace.min.js"></script>
		<!-- inline scripts related to this page -->
		<script type="text/javascript">
			jQuery(function($) {
				selectData();
				$(".bl-del").click(function(){
					$(".mask").css('display', 'none');
					$(".opening-information").css("display","none");
				});
				$(".new-building").click(function(){
					$(".mask").css('display', 'block');
					$(".opening-information").css("display","block");
				});
				$(".submit").click(function(){
					$(".mask").css('display', 'none');
					$(".opening-information").css("display","none");
				})
			})
			
			var token = "80D10061900060F21442500541D573A68666A1E64425A982E3C_A_F_1_5_0_C_";
			
			
			var flag = true;
				function clear(){
					if(flag){
						document.getElementById("doupdate").value = '';
						document.getElementById("doId").value = '';
						flag = false;
					}
				}
			
			function sunmit(){
				var id = $("#doId").val()
				if(id == null||id.length == 0||id == ""){
					$.ajax({
						type: "post",
						headers: {
							'Accept': 'application/x-www-form-urlencoded;charset=utf-8'
						},
						url: "http://10.100.24.205:8080//manager/3.0/building_label/append",
						dataType: 'json',
						data: {
							token: token,
							pageLimit: 10,
							labelName:$("#doupdate").val()
						},
						success: function(result) {
							clear();
							if("0"==result.code)
							selectData();
						}
					});
				}else{
					$.ajax({
						type: "post",
						headers: {
							'Accept': 'application/x-www-form-urlencoded;charset=utf-8'
						},
						url: "http://10.100.24.205:8080//manager/3.0/building_label/modify",
						dataType: 'json',
						data: {
							token: token,
							pageLimit: 10,
							id:id,
							labelName:$("#doupdate").val()
						},
						success: function(result) {
							clear();
							if("0"==result.code)
							selectData();
						}
					});
				}
				
			}
			
			function del(id){
				console.log(id);
				alert(id);
				$.ajax({
					type: "post",
					headers: {
						'Accept': 'application/x-www-form-urlencoded;charset=utf-8'
					},
					url: "http://10.100.24.205:8080//manager/3.0/building_label/discard",
					dataType:'json',
					data:{
						token: token,
						pageLimit: 10,
						id:id
					},
					success: function(result) {
						if("0"==result.code)
						selectData();
					}
				});
			}
			
			function update(id){
				$(".mask").css('display', 'block');
				$(".opening-information").css("display","block");
				$.ajax({
					type: "post",
					headers: {
						'Accept': 'application/x-www-form-urlencoded;charset=utf-8'
					},
					url: "http://10.100.24.205:8080//manager/3.0/building_label/info",
					dataType: 'json',
					data: {
						token: token,
						pageLimit: 10,
						id:id
					},
					success: function(result) {
						console.log(result.data);
						item = result.data
						$("#doupdate").val(item.labelName);
						$("#doId").val(item.id);
					}
				});
			}
			
			function selectData(){
				$.ajax({
					type: "post",
					headers: {
						'Accept': 'application/x-www-form-urlencoded;charset=utf-8'
					},
					url: "http://10.100.24.205:8080//manager/3.0/building_label/list",
					dataType: 'json',
					data: {
						token: token,
						pageLimit: 10
					},
					success: function(result) {
						console.log(result.data.pageListData);
						$("#buildingLabel").html('');
						var str = "";
						$.each(result.data.pageListData, function(i, item) {
							str += '<tr>';
							str += '<td>' + item.labelName + '</td>';
							str += '<td>' + item.createTime + '</td>';
							str += '<td>' + item.creator + '</td>';
							str += '<td>' + item.count + '</td>';
							str += '<td><a href="javascript:void(0);" onclick="javascript:update(\''+item.id+'\')"  >编辑</a>&nbsp;&nbsp;<a href="javascript:void(0);" onclick="javascript:del(\''+item.id+'\')">删除</a></td>';
							str += '</tr>';
						});
							str += "";
							$("#buildingLabel").append(str);
		
						}
					});
			}
		
		</script>
	</body>
</html>
